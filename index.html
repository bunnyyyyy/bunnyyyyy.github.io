<!DOCTYPE html>
<html>
<head>
  <title>Random Bird</title>
  <script>
    function getRandomBird() {
        var lineNumber = Math.floor(Math.random() * 40) + 1;

        return fetch('birdlist.txt')
          .then(response => response.text())
          .then(data => {
            const lines = data.split('\n');
            return lines[lineNumber - 1];
          })
          .catch(error => console.error(error));
    }

    function getLink() {
      return getRandomBird()
        .then(birdName => {
          var imagePath = 'links/' + birdName + '.txt';
          var lineNumber = Math.floor(Math.random() * 50) + 1;

          return fetch(imagePath)
            .then(response => response.text())
            .then(data => {
              const lines = data.split('\n');
              return lines[lineNumber - 1];
            })
            .catch(error => console.error(error));
        })
        .catch(error => console.error(error));
    }

    function displayImage() {
      getLink().then(imageLink => {
        var imgElement = document.querySelector('img');
        imgElement.setAttribute('src', imageLink);
      });
    }

  </script>
</head>
<body onload="displayImage()">
  <h1>Random Bird</h1>
  <p>Have fun!</p>
  <br>
  <img>
</body>
</html>
